{"version":3,"sources":["components/header/Header.jsx","components/footer/Footer.jsx","actions/index.js","components/playground/loader/ModalDefault.jsx","components/playground/loader/Loader.jsx","components/playground/navio-container/ActionGroup.jsx","components/playground/navio-container/sidebar/Attribute.jsx","components/playground/navio-container/sidebar/ColorPicker.jsx","components/playground/navio-container/sidebar/SortableItem.jsx","components/playground/navio-container/sidebar/SortableList.jsx","components/playground/navio-container/sidebar/Sider.jsx","filters.js","navio.js","components/playground/navio-container/NavioContainer.jsx","components/playground/sample-data/Sample.jsx","components/playground/Playground.jsx","components/App.jsx","reducers/shipyard.js","reducers/ui.js","reducers/index.js","registerServiceWorker.js","index.js"],"names":["Header","react_default","a","createElement","style","fontSize","textAlign","icon","marginRight","type","Footer","href","target","rel","types","getType","attribute","notNumber","isNaN","isDate","attr","mydate","Date","getDate","checkDate","getAttributesType","keys","atts","data","attributes","JSON","parse","stringify","ids","reg","sample","n","ss","i","push","map","d","Math","floor","length","getSample","_loop","key","test","name","id","res","accumulative","forEach","max","typei","_types$i","Object","slicedToArray","setData","source","slice","alias","checked","settings","_getAttributesType","_getAttributesType2","row","att","mynumber","setComponentClasses","changeCheckStatus","status","changeTypeStatus","toggleSettingsVisible","index","visible","setAttributeColor","color","event","connect","state","ui","datasets","shipyard","confirmLoading","dispatch","showModal","handleOk","handleCancel","toggleLoading","toggleDataLoaded","_ref","es_button","ghost","onClick","modal","title","onOk","onCancel","width","footer","gutter","col","xs","sm","md","lg","xl","card","d3","concat","err","className","height","overflowY","cursor","marginBottom","description","size","n_attributes","Dragger","Upload","handleFile","file","reader","window","FileReader","onload","lEvent","values","format","split","pop","toLowerCase","vega","result","console","error","readAsText","margin","alignItems","minHeight","accept","beforeUpload","e","divider","loader_ModalDefault","ButtonGroup","Button","Group","exportData","resetData","toggleSidebar","download","__i","items","replacer","value","header","csv","fieldName","join","unshift","blob","Blob","FileSaver","saveAs","tooltip","placement","mimeType","catColumns","seqColumns","elHtml","Option","Select","OptGroup","Attribute","_this","props","_this2","this","_this$props","toggleVisible","addComponentClass","deleteLastComponentClass","ico","align","justify","span","offset","shape","log","setState","es_select","dropdownMatchSelectWidth","onChange","label","es_switch","defaultChecked","marginLeft","Component","param","ColorPicker","setColor","Categorical","SequentialPicker","cat10","arr10","defaultValue","ColorPicker_Option","backgroundColor","colors","click","ownProps","attributeName","onChangeInput","f","SortableItem","SortableElement","number","componentClasses","toggleColorVisible","padding","borderRadius","sidebar_Attribute","sidebar_ColorPicker","input","addonAfter","onPressEnter","classes","setAlias","SortableList","SortableContainer","marginTop","sidebar_SortableItem","reorderAttributes","oldIndex","newIndex","j","sidebar_SortableList","onSortEnd","_ref2","copy","toConsumableArray","newArr","arrayMove","FilterByRange","opts","classCallCheck","first","last","level","createClass","FilterByValue","itemAttr","sel","DEBUG","navio","selection","_h","xScale","x","levelScale","canvas","context","nv","dataIs","links","visibleLinks","dData","dDimensions","dimensionsOrder","dSortBy","dBrushes","filtersByLevel","yScales","undefined","colScales","defaultColorInterpolator","interpolateBlues","defaultColorInterpolatorDate","interpolatePurples","defaultColorInterpolatorDiverging","interpolateBrBG","visibleColorRange","fmt","x0","y0","updateCallback","nozoom","preventDefault","howManyItemsShouldSearchForNotNull","attribWidth","levelsSeparation","divisionsColor","levelConvectionsColor","divisionsThreshold","attribFontSize","attribFontSizeSelected","startColor","endColor","legendFont","linkColor","selectAll","remove","on","append","select","svg","call","path","moveTo","lineTo","crossSize","arc","PI","toString","showLoading","removeBrushOnLevel","updateData","getVisible","hideLoading","range","round","paddingInner","paddingOuter","val","node","top","offsetTop","left","offsetLeft","scale","devicePixelRatio","ele","invertOrdinalScale","domain","qScale","onSortLevel","defaultPrevented","attrib","reverse","updateSorting","lev","move","removeAllBrushesBut","but","addBrush","extent","bandwidth","sourceEvent","before","performance","now","brushed","get","newFilter","shiftKey","filteredData","applyFilters","assignIndexes","after","newData","_brush","filter","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","return","enter","merge","onMouseOver","clientY","clientX","itemId","onSelectByValueFromCoords","onMouseOut","exit","overData","screenY","screenX","tool","text","drawBrushes","updateBrushes","attribs","levelOverlay","levelOverlayEnter","each","cbk","attribOverlay","_","attribOverlayEnter","all","setTimeout","container","attribDragstarted","attribDragged","attribDragended","transition","duration","parentNode","pos","attrDraggedInto","indexOf","moveAttrToPos","drawLink","link","lastAttrib","rightBorder","ys","yt","miny","min","maxy","midy","quadraticCurveTo","drawLine","points","close","beginPath","p","y","lineWidth","fillStyle","closePath","fill","strokeStyle","stroke","levelToUpdate","hasOwnProperty","sort","b","NaN","d3DescendingNull","d3AscendingNull","splice","getContext","imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","globalCompositeOperation","initData","mData","mColScales","set","__seqId","mDataIs","ctxWidth","lastLevel","representatives","itemsPerpixel","rep","__type","_d3$extent","_d3$extent2","absMax","updateScales","update","_updateBrushes","w","clearRect","levelData","rect","drawLevelBorder","item","ceil","yLine","drawItem","iOnPrev","iRep","locPrevLevel","locLevel","save","globalAlpha","restore","maxLevel","drawCloseButton","addAttrib","addSequentialAttrib","_scale","addDateAttrib","addDivergingAttrib","addCategoricalAttrib","addAllAttribs","_attribs","Error","obj","getAttribs","dataSample","findNotNull","has","arguments","cat","dat","NavioContainer","getScaleOrdinalScheme","scheme","scaleOrdinal","d3ScaleChromatic","getScaleOrdinalColor","scaleLinear","getScaleTimeColor","scaleTime","setupNavio","nn","updateFilteredData","scalePow","updated","updateAttribute","deleteWidget","myNode","document","getElementById","firstChild","removeChild","showSidebar","sidebarStyles","navio_container_ActionGroup","Sider","overflowX","ref","preview","columns","column","dataIndex","table","bordered","pagination","dataSource","scroll","dataLoaded","navio_container_NavioContainer","sample_data_Sample","loader_Loader","Layout","Content","headerStyle","boxShadow","mainStyle","loading","layout","affix","App_Header","header_Header","playground_Playground","App_Footer","footer_Footer","initialState","action","assign","attrs","attrs2","pos2","sourceData","datum","actualData","attributesColor","closed","componentsDeleted","componentAdd","componentsAdd","temp","swaped","array","k","combineReducers","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","loggerMiddleware","createLogger","store","createStore","rootReducer","applyMiddleware","thunkMiddleware","render","react_redux_es","components_App","URL","process","origin","addEventListener","fetch","response","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.dda91c8d.chunk.js","sourcesContent":["import React from 'react';\nimport { Icon } from 'antd';\n\nconst Header = () => (\n  <div>\n    <div style={{fontSize: '1.5em', textAlign: 'center'}}>\n      <Icon style={{ marginRight: '0.5em' }} type=\"compass\" />\n      Shipyard\n    </div>\n  </div>\n);\n\nexport default Header;\n","import React from 'react';\nimport { Icon } from 'antd';\n\nconst Footer = () => (\n  <div style={{ textAlign: 'left' }}>\n    <a\n      href=\"https://github.com/john-guerra/Navio\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      Github Project MIT License <Icon type=\"github\" />\n    </a>\n  </div>\n);\n\nexport default Footer;\n","/*\n *  action types\n */\n\nexport const SET_DATA = 'SET_DATA';\nexport const SET_ATTRIBUTES = 'SET_ATTRIBUTES';\nexport const SET_ATTRIBUTE_COLOR = 'SET_ATTRIBUTE_COLOR';\nexport const SHOW_MODAL = 'SHOW_MODAL';\nexport const HANDLE_OK = 'HANDLE_OK';\nexport const HANDLE_CANCEL = 'HANDLE_CANCEL';\nexport const TOGGLE_LOADING = 'TOGGLE_LOADING';\nexport const TOGGLE_DATA_LOADED = 'TOGGLE_DATA_LOADED';\nexport const TOGGLE_SIDEBAR = 'TOGGLE_SIDEBAR';\nexport const RESET_DATA = 'RESET_DATA';\nexport const CHANGE_CHECK_STATUS = 'CHANGE_CHECK_STATUS';\nexport const CHANGE_TYPE_STATUS = 'CHANGE_TYPE_STATUS';\nexport const UPDATE_ATTRIBUTE = 'UPDATE_ATTRIBUTE';\nexport const UPDATE_FILTERED_DATA = 'UPDATE_FILTERED_DATA';\nexport const TOGGLE_SETTINGS_VISIBLE = 'TOGGLE_SETTINGS_VISIBLE';\nexport const TOGGLE_COLOR_VISIBLE = 'TOGGLE_COLOR_VISIBLE';\nexport const DELETE_COMPONENT_CLASS = 'DELETE_COMPONENT_CLASS';\nexport const ADD_COMPONENT_CLASS = 'ADD_COMPONENT_CLASS';\nexport const SET_COMPONENT_CLASSES = 'SET_COMPONENT_CLASSES';\nexport const SWAP_COMPONENT_CLASSES = 'SWAP_COMPONENT_CLASSES';\nexport const SET_ALIAS = 'SET_ALIAS';\n\nconst seq = 'SEQUENTIAL';\nconst cat = 'CATEGORICAL';\nconst ord = 'ORDINAL';\nconst dat = 'DATE';\nconst types = [\n  [seq, 'NUMBER'],\n  [dat, dat],\n  [cat, 'STRING']\n]\n/**\n * Method that return true if a string is a date\n * @param {*} attr\n */\nconst checkDate = (attr) => {\n  const mydate = new Date(attr);\n  if (isNaN(mydate.getDate())) {\n    return false;\n  }\n  return true;\n};\n\n/**\n * Returns the type of attribute casting each case.\n * @param {*} attribute\n */\nconst getType = (attribute) => {\n  const notNumber = isNaN(attribute);\n  const isDate = checkDate(attribute);\n  if (!notNumber) {\n    // return [seq, 'NUMBER'];\n    return 0;\n  } else if (isDate) {\n    // return [dat, 'DATE'];\n    return 1;\n  } else {\n    // return [cat, 'STRING'];\n    return 2;\n  }\n}\n/**\n * Function that returns n samples from array\n * @param {Integer} n - Number of samples\n * @param {Array<Object>} data - Array with data objects\n */\nconst getSample = (n, data) => {\n  let ss = [];\n  for (let i = 1; i < n + 1; i++) {\n    ss.push(i);\n  }\n  const indexes = ss.map(d => Math.floor(data.length*(d/n))-1);\n  const sample = indexes.map(d => data[d]);\n  return sample;\n\n}\nconst getAttributesType = (keys, atts, data) => {\n  let attributes = JSON.parse(JSON.stringify(atts));\n  let ids = [];\n  // regular expression used to match strings starting and finishing with id or key or in a word within non-word characters\n  const reg = /^(id|key)|(id|key)$|\\W+\\_*(key|id)+\\_*\\W+|\\W+\\_*(key|id)+\\_*\\W*/gmi;\n  // returns 6 uniformly distributed rows\n  const sample = getSample(6, data);\n  for (let key = 0; key < keys.length; key += 1) {\n    // checks for ID\n    if (reg.test(attributes[key].name)) {\n      attributes[key].id = true;\n      ids.push(atts[key].name);\n    }\n    const sampleAttributes = sample.map(d => d[keys[key]]);\n    const res = sampleAttributes.map(getType);\n    let accumulative = [0,0,0];\n    res.forEach(d => accumulative[d] += 1);\n    let max = 0;\n    let i = 0;\n    for(let typei = 0; typei < accumulative.length; typei++) {\n      if(accumulative[typei] > max) {\n        max = accumulative[typei];\n        i = typei;\n      }\n    }\n    const [type, data] = types[i];\n    attributes[key].type = type;\n    attributes[key].data = data;\n  }\n  return [attributes, ids];\n};\n\n/*\n * action creators\n */\nexport const setData = (data) => {\n  const source = data.slice(0);\n  /* Creates an empty array that will contain the metadata of the attributes */\n  let attributes = [];\n  let ids = [];\n  const keys = Object.keys(data[0]);\n  for (let i = 0; i < keys.length; i += 1) {\n    const attribute = {\n      name: keys[i],\n      alias: keys[i],\n      checked: true,\n      type: '',\n      id: false,\n      settings: false,\n    };\n    attributes.push(attribute);\n  }\n  [attributes, ids] = getAttributesType(keys, attributes, data);\n  const parsedData = data.map((d) => {\n    let row = JSON.parse(JSON.stringify(d));\n    attributes.forEach((att)=> {\n      if (att.data === 'DATE') {\n        const mydate = new Date(row[att.name]);\n        if (isNaN(mydate.getDate())) {\n        } else {\n          row[att.name] = mydate;\n        }\n      } else if (att.data === 'NUMBER') {\n        const mynumber = +row[att.name];\n        if (isNaN(mynumber)) {\n        } else {\n          row[att.name] = mynumber;\n        }\n      }\n    });\n    return row;\n  });\n  return {\n    type: SET_DATA,\n    source,\n    data: parsedData,\n    attributes,\n    ids,\n  };\n};\nexport const setComponentClasses = attributes => ({\n  type: SET_COMPONENT_CLASSES,\n  attributes,\n});\n\nexport const setColor = (color, attributeName) => ({\n  type: SET_ATTRIBUTE_COLOR,\n  color,\n  attributeName,\n});\n\nexport const showModal = () => ({ type: SHOW_MODAL });\n\nexport const handleOk = () => {};\n\nexport const handleCancel = () => {};\n\nexport const toggleLoading = () => ({ type: TOGGLE_LOADING });\n\nexport const toggleDataLoaded = () => ({ type: TOGGLE_DATA_LOADED });\n\nexport const resetData = () => ({ type: RESET_DATA });\n\nexport const toggleSidebar = () => ({ type: TOGGLE_SIDEBAR });\n\nexport const changeCheckStatus = (attribute, status) => ({\n  type: CHANGE_CHECK_STATUS,\n  attribute,\n  status,\n});\n\nexport const changeTypeStatus = (attribute, status) => ({\n  type: CHANGE_TYPE_STATUS,\n  attribute,\n  status,\n});\n\nexport const updateAttribute = () => ({ type: UPDATE_ATTRIBUTE });\n\nexport const updateFilteredData = exportData => ({ type: UPDATE_FILTERED_DATA, exportData });\n\nexport const toggleSettingsVisible = (index, visible) => ({\n  type: TOGGLE_SETTINGS_VISIBLE,\n  index,\n  visible,\n});\n\nexport const setAttributes = attributes => ({\n  type: SET_ATTRIBUTES,\n  attributes,\n});\n\nexport const setAttributeColor = (color, event, index) => ({\n  type: SET_ATTRIBUTE_COLOR,\n  color,\n  event,\n  index,\n});\n\nexport const toggleColorVisible = index => ({\n  type: TOGGLE_COLOR_VISIBLE,\n  index,\n});\n\nexport const deleteLastComponentClass = index => ({\n  type: DELETE_COMPONENT_CLASS,\n  index,\n});\n\nexport const addComponentClass = (className, index) => ({\n  type: ADD_COMPONENT_CLASS,\n  className,\n  index,\n})\n\nexport const swapComponentClasses = (i, j) => ({\n  type: SWAP_COMPONENT_CLASSES,\n  i,\n  j,\n})\n\nexport const setAlias = (event, attribute) => ({\n  type: SET_ALIAS,\n  event,\n  attribute,\n});\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Button, Modal, Card, Row, Col } from 'antd';\nimport { showModal, handleOk, setData, toggleLoading, toggleDataLoaded, setComponentClasses } from './../../../actions';\nimport * as d3 from 'd3';\n\nconst ModalDefault = ({ visible, datasets, confirmLoading, showModal, handleOk, handleCancel, setData, toggleLoading, toggleDataLoaded, setComponentClasses }) => {\n  const pathDataset = 'https://raw.githubusercontent.com/john-guerra/shipyard/master/public/datasets/';\n  const handleDataset = (name) => {\n    toggleLoading();\n    d3.csv(`${pathDataset}${name}`, (err, data) => {\n      if (err) throw err;\n      setData(data);\n      setComponentClasses(Object.keys(data[0]));\n      toggleLoading();\n      toggleDataLoaded();\n      handleCancel();\n    });\n  };\n  return (\n    <div>\n      <Button type=\"primary\" ghost onClick={showModal}>Choose one</Button>\n      <Modal\n        title=\"Datasets\"\n        visible={visible}\n        onOk={handleOk}\n        confirmLoading={confirmLoading}\n        onCancel={handleCancel}\n        width=\"90%\"\n        footer={[\n          <Button onClick={handleCancel} key=\"back\">Cancel</Button>,\n        ]}\n      >\n        <Row gutter={32}>\n          { datasets.map(d => (\n            <Col xs={24} sm={12} md={12} lg={6} xl={6} key={d.id}>\n              <Card\n                onClick={() => handleDataset(d.name)}\n                className=\"hoverable\"\n                title={d.title}\n                style={{ width: '100%', height: '30vh', overflowY: 'scroll', cursor: 'pointer', marginBottom: 32 }}\n              >\n                <p>Description: {d.description}</p>\n                <p>Records(rows): {d.size}</p>\n                <p>Attributes: {d.n_attributes}</p>\n              </Card>\n            </Col>\n          ))}\n        </Row>\n      </Modal>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  visible: state.ui.visible,\n  datasets: state.shipyard.datasets,\n  confirmLoading: state.ui.confirmLoading,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  showModal: () => dispatch(showModal()),\n  handleOk: name => dispatch(handleOk(name)),\n  handleCancel: () => dispatch(showModal()),\n  setData: (data) => dispatch(setData(data)),\n  toggleLoading: () => dispatch(toggleLoading()),\n  toggleDataLoaded: () => dispatch(toggleDataLoaded()),\n  setComponentClasses: atts => dispatch(setComponentClasses(atts)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalDefault);\n","import React from 'react';\nimport { Upload, Icon, Divider } from 'antd';\nimport ModalDefault from './ModalDefault';\nimport { connect } from 'react-redux';\nimport { toggleLoading, setData, toggleDataLoaded, setComponentClasses } from './../../../actions';\nimport * as vega from 'vega';\n\nconst Dragger = Upload.Dragger;\nconst Loader = ({ attributes, toggleLoading, setData, toggleDataLoaded, setComponentClasses }) => {\n  const beforeUpload = (e) => {\n    toggleLoading();\n    handleFile(e);\n  };\n  const handleFile = (file) => {\n    const reader = new window.FileReader();\n    if (file == null) {\n      return;\n    }\n    reader.onload = (lEvent) => {\n      const format = file.name.split('.').pop().toLowerCase();\n      var values;\n      try {\n        values = vega.read(lEvent.target.result, {type: format});\n        setData(values);\n        setComponentClasses(Object.keys(values[0]));\n        toggleLoading();\n        toggleDataLoaded();\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    reader.readAsText(file);\n  }\n  return (\n    <div style={{ textAlign: 'center', margin: '1em' }}>\n      <Dragger\n        style={{ alignItems: 'center', minHeight: '70vh' }}\n        accept=\".csv,.tsv,.txt\"\n        beforeUpload={beforeUpload}\n        name=\"file\"\n      >\n        <div className=\"dragger\">\n          <p className=\"ant-upload-drag-icon\">\n            <Icon type=\"upload\" />\n          </p>\n          <h1 style={{ fontSize: '2em' }}>\n            Drag and drop or click here to upload your dataset\n          </h1>\n          <p className=\"ant-upload-hint\">*.csv, *.tsv and *.txt files allowed.</p>\n        </div>\n      </Dragger>\n      <div>\n        <Divider>\n          <p>or you can click below to explore pre-loaded datasets</p>\n        </Divider>\n      </div>\n      <div>\n        <ModalDefault />\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  attributes: state.shipyard.attributes,\n});\n\nconst mapDispatchToPropt = dispatch => ({\n  toggleLoading: () => dispatch(toggleLoading()),\n  setData: data => dispatch(setData(data)),\n  toggleDataLoaded: () => dispatch(toggleDataLoaded()),\n  setComponentClasses: atts => dispatch(setComponentClasses(atts))\n})\n\nexport default connect(mapStateToProps, mapDispatchToPropt)(Loader);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Button, Icon, Tooltip } from 'antd';\nimport { resetData, toggleSidebar } from './../../../actions';\nimport FileSaver from 'file-saver';\n\nconst ButtonGroup = Button.Group;\nconst ActionGroup = ({ exportData, data, attributes, resetData, toggleSidebar }) => {\n  const download = () => {\n    let data = exportData;\n    data.forEach(d => delete d.__i);\n    const items = data.slice();\n    const replacer = (key, value) => value === null ? '' : value; // specify how you want to handle null values here\n    const header = Object.keys(items[0]);\n    let csv = items.map(row => header.map(fieldName => JSON.stringify(row[fieldName], replacer)).join(','));\n    csv.unshift(header.join(','));\n    csv = csv.join('\\r\\n');\n    const blob = new Blob([csv], {type: 'text/csv;charset=utf-8'});\n    FileSaver.saveAs(blob, 'export_data.csv');\n  };\n  const exportVisualization = () => {\n    let mimeType = 'text/html';\n    let catColumns = [];\n  let seqColumns = [];\n    attributes.forEach(a => {\n      if (a.type === 'categorical') {\n        catColumns.push(a.name);\n      } else {\n        seqColumns.push(a.name);\n      }\n    })\n    const elHtml = `<!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n      <meta charset=\"UTF-8\">\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n      <title>Navio</title>\n    </head>\n    <body>\n      <div id=\"navio\"></div>\n\n      <script src=\"https://d3js.org/d3.v4.min.js\"></script>\n      <script src=\"https://d3js.org/d3-interpolate.v1.min.js\"></script>\n      <script src=\"https://d3js.org/d3-scale-chromatic.v1.min.js\"></script>\n      <script type=\"text/javascript\" src=\"https://unpkg.com/navio@0.0.29/dist/navio.min.js\"></script>\n      <script type=\"text/javascript\">\n        let nn = navio(\"#navio\", 600);\n        let cat = \"CATEGORICAL\"\n        let seq = \"SEQUENTIAL\";\n        let date = \"DATE\"\n      let attributes = JSON.parse('${JSON.stringify(attributes)}');\n        d3.csv(\"./export_data.csv\", function (err, data) {\n          if (err) throw err;\n        data.forEach((row) => {\n          attributes.forEach(att => {\n            if (att.data === date) {\n              let mydate = new Date(row[att.name]);\n              if(isNaN(mydate.getDate())){\n                row[att.name] = null;\n              }else {\n                row[att.name] = mydate\n              }\n\n            }\n            else if (att.data=== \"number\") {\n              let mynumber = +row[att.name];\n              if(isNaN(mynumber)){\n                row[att.name] = null;\n              }else{\n                row[att.name] = mynumber;\n              }\n            }\n          })\n        })\n\n        attributes.forEach((d,i) => {\n            if (d.checked) {\n              if (d.type === cat) {\n                nn.addCategoricalAttrib(d.name);\n              } else if (d.type === seq) {\n                if (d.data === date) {\n                  nn.addSequentialAttrib(d.name,\n                            d3.scalePow()\n                              .exponent(0.25)\n                              .range([d3.interpolatePurples(0), d3.interpolatePurples(1)]))\n                }\n                else {\n                  nn.addSequentialAttrib(d.name);\n                }\n              }\n           }\n          })\n        nn.data(data);\n      });\n      </script>\n    </body>\n    </html>`;\n    download();\n    mimeType = mimeType || 'text/plain';\n    const filename = 'index.html';\n    const blob = new Blob([elHtml], {type: `${mimeType};charset=utf-8`});\n    FileSaver.saveAs(blob, filename);\n  };\n\n  return (\n    <div style={{ textAlign: 'center' }}>\n      <ButtonGroup>\n        <Tooltip\n          placement=\"bottom\"\n          title=\"Show sidebar to hide/show attributes and change their type.\"\n        >\n          <Button onClick={toggleSidebar}>\n            <Icon type=\"setting\" />Setup Navio\n          </Button>\n        </Tooltip>\n        <Tooltip\n          placement=\"bottom\"\n          title=\"Export the filtered data in csv format.\"\n        >\n          <Button onClick={download}>\n            <Icon type=\"table\" />Export data\n          </Button>\n        </Tooltip>\n        <Tooltip\n          placement=\"bottom\"\n          title=\"Export an embedded version of the visualization (data.csv + index.html).\"\n        >\n          <Button onClick={exportVisualization}>\n              <Icon type=\"export\" />Export visualization\n          </Button>\n        </Tooltip>\n        <Tooltip placement=\"bottom\" title=\"Choose another dataset.\">\n          <Button onClick={resetData}>\n            <Icon type=\"swap\" />Change dataset\n          </Button>\n        </Tooltip>\n      </ButtonGroup>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  exportData: state.shipyard.exportData,\n  data: state.shipyard.data,\n  attributes: state.shipyard.attributes,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  resetData: () => dispatch(resetData()),\n  toggleSidebar: () => dispatch(toggleSidebar()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ActionGroup);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Row, Col, Button, Icon, Select, Tooltip, Switch } from 'antd';\nimport { toggleSettingsVisible, changeTypeStatus, changeCheckStatus, updateAttribute, addComponentClass, deleteLastComponentClass } from './../../../../actions';\n\nconst { Option, OptGroup } = Select;\nclass Attribute extends Component {\n  componentDidMount(){\n  }\n  componentDidUpdate(){\n  }\n  state = {\n    checked: this.props.checked,\n    settings: this.props.settings,\n  }\n  render () {\n    const { index, attribute, toggleVisible, changeCheckStatus, changeTypeStatus, addComponentClass, deleteLastComponentClass } = this.props;\n    const ico = attribute.settings ? 'up' : 'setting';\n    return (\n      <Row type=\"flex\" align=\"middle\" justify=\"center\" className=\"attribute\">\n        <Col span={2} offset={1}>\n          <Button shape=\"circle\" size=\"small\" onClick={() => {\n              console.log('onClick')\n              this.setState({settings: !attribute.settings});\n              toggleVisible(index, !attribute[\"settings\"]);\n              if (attribute.settings) {\n                deleteLastComponentClass(index);\n              } else {\n                addComponentClass('hide', index);\n              }\n            }}\n          >\n            <Icon type={ico} />\n          </Button>\n        </Col>\n        <Col span={8}  offset={1}>{attribute.name}</Col>\n        <Col span={8}>\n          {console.log(attribute.name, attribute.type)}\n          <Select\n            size=\"small\"\n            style={{ width: '100%' }}\n            dropdownMatchSelectWidth={false}\n            value={attribute.type}\n            onChange={value => changeTypeStatus(attribute, value)}\n          >\n            <OptGroup label=\"unordered\">\n              <Option value=\"CATEGORICAL\">CATEGORICAL</Option>\n            </OptGroup>\n            <OptGroup label=\"ordered\">\n              <Option value=\"ORDINAL\">ORDINAL</Option>\n              <Option value=\"SEQUENTIAL\">SEQUENTIAL</Option>\n              <Option value=\"DATE\">DATE</Option>\n            </OptGroup>\n          </Select>\n        </Col>\n        <Col span={4}>\n          <Tooltip placement=\"right\" title=\"Here you can change this dimension visibility\">\n            <Switch size=\"small\" defaultChecked={true} checked={attribute.checked} style={{ marginLeft: '2em' }} onChange={checked => { console.log(checked);this.setState({checked}); changeCheckStatus(attribute, checked);}} />\n          </Tooltip>\n        </Col>\n      </Row>\n    )\n  }\n}\n\nconst mapStateToProps = (state, param) => ({\n  attribute: state.shipyard.attributes[param.index],\n  index: param.index,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  toggleVisible: (index, visible) => {\n    dispatch(toggleSettingsVisible(index, visible));\n  },\n  changeTypeStatus: (att, value) => {\n    dispatch(changeTypeStatus(att, value));\n    dispatch(updateAttribute());\n  },\n  changeCheckStatus: (att, status) => {\n    dispatch(changeCheckStatus(att, status));\n    dispatch(updateAttribute());\n  },\n  deleteLastComponentClass: index => dispatch(deleteLastComponentClass(index)),\n  addComponentClass: (className, index) => dispatch(addComponentClass(className, index)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Attribute);\n","import React, { Component } from 'react';\nimport { Select, Button } from 'antd';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport './sortableItem.css';\nimport { setColor, updateAttribute } from './../../../../actions';\n\nconst Option = Select.Option;\n\nclass ColorPicker extends Component {\n  render(){\n    let { setColor, name } = this.props;\n    if (this.props.type == 'categorical') {\n      return Categorical();\n    }\n    else {\n      return SequentialPicker(setColor, name);\n    }\n  }\n}\n\nconst Categorical = () => {\n  const cat10 = d3.scaleOrdinal(d3.schemeCategory10);\n  const arr10 = d3.range(10);\n  const arr20 = d3.range(20);\n  return (\n    <Select size=\"small\" defaultValue=\"scheme10\" className=\"color-selector\">\n        <Option value=\"scheme10\">\n          <div className=\"scheme10\">\n            {\n              arr10.map((d,i) => (\n                <div key={i+'10'} style={{ width: 20, height: 20, backgroundColor: cat10(d)}}>\n                </div>\n              ))\n            }\n          </div>\n        </Option>\n      </Select>\n  );\n};\n\nclass CategoricalPicker extends Component {\n  render () {\n    var cat10 = d3.scaleOrdinal(d3.schemeCategory10);\n    var cat20 = d3.scaleOrdinal(d3.schemeCategory20);\n    var cat20b = d3.scaleOrdinal(d3.schemeCategory20b);\n    var cat20c = d3.scaleOrdinal(d3.schemeCategory20c);\n    let arr10 = d3.range(10);\n    let arr20 = d3.range(20);\n    return (\n      <Select size=\"small\" defaultValue=\"scheme10\" className=\"color-selector\">\n        <Option value=\"scheme10\">\n          <div className=\"scheme10\">\n            {\n              arr10.map(d => (\n                <div style={{ width: 20, height: 20, backgroundColor: cat10(d)}}>\n                </div>\n              ))\n            }\n          </div>\n        </Option>\n        <Option value=\"scheme20\">\n          <div className=\"scheme20\">\n            {\n              arr20.map(d => (\n                <div style={{ width: 10, height: 20, backgroundColor: cat20(d)}}>\n                </div>\n              ))\n            }\n          </div>\n        </Option>\n        <Option value=\"scheme20b\">\n          <div className=\"scheme20\">\n            {\n              arr20.map(d => (\n                <div style={{ width: 10, height: 20, backgroundColor: cat20b(d)}}>\n                </div>\n              ))\n            }\n          </div>\n        </Option>\n        <Option value=\"scheme20c\">\n          <div className=\"scheme20\">\n            {\n              arr20.map(d => (\n                <div style={{ width: 10, height: 20, backgroundColor: cat20c(d)}}>\n                </div>\n              ))\n            }\n          </div>\n        </Option>\n      </Select>\n    )\n  }\n\n}\n\nconst colors = [\"blue\", \"green\", \"gray\", \"orange\",\"purple\", \"red\"];\n\n\nconst SequentialPicker = (setColor, name) => {\n  console.log(setColor)\n  return (\n    <div className=\"sequential-picker\">\n      { colors.map(d=> (\n        <Button key={d} onClick={(click) => setColor(d, name)} shape=\"circle\" style={{ backgroundColor: d }}></Button>\n        ))\n      }\n    </div>\n\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  type: ownProps.type,\n  name: ownProps.name,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setColor: (d, click) => {dispatch(setColor(d, click)); dispatch(updateAttribute());},\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { SortableElement } from 'react-sortable-hoc';\nimport { Button, Input, Divider, Icon } from 'antd';\nimport { ChromePicker } from 'react-color';\nimport Attribute from './Attribute';\nimport ColorPicker from './ColorPicker';\nimport { toggleColorVisible, setAttributeColor, setAlias } from './../../../../actions';\nimport './sortableItem.css';\n\nconst ButtonGroup = Button.Group;\nconst onChangeInput = (event, f, attribute) => {\n  console.log('onChangeInput')\n  console.log(event, f, attribute);\n}\nconst SortableItem = SortableElement(({attribute, number, componentClasses, setColor, toggleColorVisible}) => {\n  return (\n    <div className=\"sortableItem\" style={{ padding: '0.25em', backgroundColor: 'white', marginBottom: '0em', cursor: 'move', borderRadius: '2px'}}>\n      <Attribute attribute={attribute} index={number} />\n      <div className={componentClasses.join(' ')}>\n        <div className=\"settings\">\n          <hr />\n          <div className=\"color\">\n            <div>\n              <div>\n                color\n              </div>\n            </div>\n            <div>\n              <ColorPicker type={attribute.type} name={attribute.name} />\n            </div>\n          </div>\n          <hr />\n          <div className=\"alias\">\n            <div>\n              alias\n            </div>\n            <div>\n               <Input\n                size=\"small\"\n                addonAfter={[<Icon key={attribute.name} style={{ color: 'blue' }} type=\"check\" />, <Divider key={attribute.name +'1'} type=\"vertical\" />, <Icon key={attribute.name+'2'} style={{ color: 'red' }} type=\"delete\"/>]}\n                defaultValue={attribute.alias}\n                onChange={onChangeInput}\n                onPressEnter={onChangeInput}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n});\n\nconst mapStateToProps = (state, props) => ({\n  attribute: state.shipyard.attributes[props.number],\n  componentClasses: state.ui.componentClasses[props.number].classes,\n  number: props.number,\n});\n\n// const mapDispatchToProps = (dispatch, param) => {\n//   console.log('dispatch', dispatch, 'param', param);\n// };\n\nconst mapDispatchToProps = dispatch => ({\n  setColor: (color, event, index) => dispatch(setAttributeColor(color, event, index)),\n  toggleColorVisible: (index) => dispatch(toggleColorVisible(index)),\n  setAlias: (event, attribute) => dispatch(setAlias(event, attribute)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SortableItem);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { SortableContainer } from 'react-sortable-hoc';\nimport SortableItem from './SortableItem';\n\nconst SortableList = SortableContainer(({ items }) => (\n  <ul style={{ marginTop: '2em', width: '90%' }}>\n    {items.map((attribute, index) => (\n      <SortableItem key={`item-${index}`} index={index} number={index} attribute={attribute} />\n    ))}\n  </ul>\n));\n\nconst mapStateToProps = state => ({\n  items: state.shipyard.attributes,\n});\n\nexport default connect(mapStateToProps)(SortableList);\n","import React from 'react';\nimport { arrayMove } from 'react-sortable-hoc';\nimport { ChromePicker } from 'react-color';\nimport { connect } from 'react-redux';\nimport SortableList from './SortableList';\nimport { changeCheckStatus, updateAttribute, changeTypeStatus, toggleSettingsVisible, setAttributes, setAttributeColor, swapComponentClasses } from './../../../../actions';\nimport './card.css';\n\nconst content = setColor => (\n  <div>\n    <ChromePicker onChangeComplete={(color, event) => setColor(color, event, 0)} />\n  </div>\n);\n\nconst SortableComponent = ({ attributes, toggleVisible, reorderAttributes, setColor }) => {\n  const onSortEnd = ({ oldIndex, newIndex }) => {\n    if (oldIndex === newIndex) { return; };\n    let copy = [...attributes];\n    let newArr = arrayMove(copy, oldIndex, newIndex);\n    reorderAttributes(newArr, oldIndex, newIndex);\n  }\n  return (\n    <SortableList\n      onSortEnd={onSortEnd}\n    />\n  );\n};\n\nconst mapStateToProps = state => ({\n  attributes: state.shipyard.attributes,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  changeCheckStatus: (att, status) => {\n    dispatch(changeCheckStatus(att, status));\n    dispatch(updateAttribute());\n  },\n  changeTypeStatus: (att, value) => { dispatch(changeTypeStatus(att, value)); dispatch(updateAttribute()); },\n  toggleVisible: (index, visible) => { dispatch(toggleSettingsVisible(index, visible)); },\n  reorderAttributes: (atts, oldIndex, newIndex) => { dispatch(setAttributes(atts)); dispatch(swapComponentClasses(oldIndex, newIndex)); dispatch(updateAttribute()); },\n  setColor: (color, event, type) => dispatch(setAttributeColor(color, event, type)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SortableComponent);\n","export class FilterByRange {\n  constructor(opts ) {\n    this.first = opts.first;\n    this.last = opts.last;\n    this.level = opts.level;\n  }\n\n  filter(d) {\n    return d.__i[this.level] >= this.first.__i[this.level] && d.__i[this.level] <= this.last.__i[this.level];\n  }\n}\n\nexport class FilterByValue {\n  constructor(opts ) {\n    this.itemAttr = opts.itemAttr;\n    this.sel = opts.sel;\n  }\n\n  filter(d) {\n    return d[this.itemAttr] === this.sel[this.itemAttr];\n  }\n}","import * as d3 from  \"../node_modules/d3/build/d3.js\"; // Force react to use the es6 module\n// import * as d3 from \"d3\";\nimport {interpolateBlues, interpolatePurples, interpolateBrBG} from \"d3-scale-chromatic\";\nimport {FilterByRange, FilterByValue} from \"./filters.js\";\n\nlet DEBUG = false;\n\n//eleId must be the ID of a context element where everything is going to be drawn\nfunction navio(selection, _h) {\n  \"use strict\";\n  var nv = this || {},\n    data = [], //Contains the original data attributes\n    dataIs = [], //Contains only the indices to the data, is an array of arrays, one for each level\n    links = [],\n    visibleLinks = [],\n    dData = d3.map(), // A hash for the data\n    dDimensions = d3.map(),\n    dimensionsOrder = [],\n    dSortBy = [], //contains which attribute to sort by on each column\n    dBrushes = [],\n    filtersByLevel = [], // The filters applied to each level\n    yScales =[],\n    xScale,\n    x,\n    height = _h!==undefined ? _h : 600,\n    colScales = d3.map(),\n    levelScale,\n    canvas,\n    context,\n    defaultColorInterpolator =  \"interpolateBlues\" in d3 ? d3.interpolateBlues : interpolateBlues, // necessary for supporting d3v4 and d3v5\n    defaultColorInterpolatorDate =  \"interpolatePurples\" in d3 ? d3.interpolatePurples : interpolatePurples,\n    defaultColorInterpolatorDiverging =  \"interpolateBrBG\" in d3 ? d3.interpolateBrBG : interpolateBrBG,\n    visibleColorRange = [\"white\", \"#b5cf6b\"],\n    fmt = d3.format(\",.0d\"),\n    x0=0,\n    y0=100,\n    id = \"__seqId\",\n    updateCallback = function () {};\n\n  nv.howManyItemsShouldSearchForNotNull = 100;\n  nv.margin = 10;\n  nv.attribWidth = 15;\n  nv.levelsSeparation = 40;\n  nv.divisionsColor = \"white\";\n  nv.levelConvectionsColor = \"rgba(205, 220, 163, 0.5)\";\n  nv.divisionsThreshold = 4; // What's the minimum row width needed to draw divisions\n  nv.attribFontSize = 13;\n  nv.attribFontSizeSelected = 32;\n\n  nv.startColor = \"white\";\n  nv.endColor = \"red\";\n  nv.legendFont = \"14px Arial\";\n  nv.linkColor = \"#2171b5\";\n  // nv.linkColor = \"rgba(0,0,70,0.9)\";\n\n\n  function nozoom() {\n    if (DEBUG) console.log(\"nozoom\");\n    d3.event.preventDefault();\n  }\n\n  // Try to support strings and elements\n  selection = typeof(selection) === typeof(\"\") ? d3.select(selection) : selection;\n  selection = selection.selectAll === undefined ? d3.select(selection) : selection;\n\n  selection.selectAll(\"*\").remove();\n\n  selection\n    .on(\"touchstart\", nozoom)\n    .on(\"touchmove\", nozoom)\n    // .attr(\"width\", 150)\n    .style(\"height\", height + \"px\")\n    .attr(\"class\", \"navio\")\n    .append(\"div\")\n    // .style(\"float\", \"left\")\n    .attr(\"id\", \"navio\")\n    .style(\"position\", \"relative\");\n  selection\n    .select(\"#navio\")\n    .append(\"canvas\");\n  var svg = selection\n    .select(\"#navio\")\n    .append(\"svg\")\n    .style(\"overflow\", \"visible\")\n    .style(\"position\", \"absolute\")\n    .style(\"z-index\", 99)\n    .style(\"top\", 0)\n    .style(\"left\", 0);\n\n\n  svg.append(\"g\")\n    .attr(\"class\", \"attribs\");\n\n  svg.append(\"g\")\n    .attr(\"class\", \"nvTooltip\")\n    .style(\"text-shadow\", \"0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff\")\n    .attr(\"transform\", \"translate(-100,-10)\")\n    .append(\"text\")\n    .attr(\"x\", 0)\n    .attr(\"y\", 0)\n    .style(\"pointer-events\", \"none\")\n    .style(\"font-family\", \"sans-serif\")\n    .style(\"font-size\", \"16pt\")\n    .style(\"text-anchor\", \"middle\");\n\n  svg.select(\".nvTooltip > text\")\n    .append(\"tspan\")\n    .attr(\"class\", \"tool_id\")\n    .attr(\"x\", 0)\n    .attr(\"dy\", \"1.2em\");\n\n  svg.select(\".nvTooltip > text\")\n    .append(\"tspan\")\n    .attr(\"class\", \"tool_value_name\")\n    .style(\"font-weight\", \"bold\")\n    .attr(\"x\", 0)\n    .attr(\"dy\", \"1.2em\");\n\n  svg.select(\".nvTooltip > text\")\n    .append(\"tspan\")\n    .attr(\"class\", \"tool_value_val\")\n    .style(\"font-weight\", \"bold\")\n    .attr(\"x\", 0)\n    .attr(\"dy\", \"1.2em\");\n\n  svg.append(\"g\")\n    .attr(\"id\", \"closeButton\")\n    .style(\"fill\", \"white\")\n    .style(\"stroke\", \"black\")\n    .style(\"display\", \"none\")\n    .append(\"path\")\n    .call(function (sel) {\n      var crossSize = 7,\n        path = d3.path(); // Draw a cross and a circle\n      path.moveTo(0, 0);\n      path.lineTo(crossSize, crossSize);\n      path.moveTo(crossSize, 0);\n      path.lineTo(0, crossSize);\n      path.moveTo(crossSize*1.2 + crossSize/2, crossSize/2);\n      path.arc(crossSize/2, crossSize/2, crossSize*1.2, 0, Math.PI*2);\n      sel.attr(\"d\", path.toString());\n    })\n    .on(\"click\", deleteOneLevel);\n\n  xScale = d3.scaleBand()\n    // .rangeBands([0, nv.attribWidth], 0.1, 0);\n    .range([0, nv.attribWidth])\n    .round(true)\n    .paddingInner(0.1)\n    .paddingOuter(0);\n  levelScale = d3.scaleBand()\n    .round(true);\n  colScales = d3.map();\n\n  x = function (val, level) {\n    return levelScale(level) + xScale(val);\n  };\n\n  canvas = selection.select(\"canvas\").node();\n  // canvas.style.position = \"absolute\";\n  canvas.style.top = canvas.offsetTop + \"px\";\n  canvas.style.left = canvas.offsetLeft + \"px\";\n  // canvas.style.width =  \"150px\";\n  canvas.style.height = height + \"px\";\n\n  const scale = window.devicePixelRatio;\n  // canvas.width = width * scale;\n  canvas.height = height * scale;\n\n  context = canvas.getContext(\"2d\");\n\n  context.scale(scale,scale);\n\n  context.imageSmoothingEnabled = context.mozImageSmoothingEnabled = context.webkitImageSmoothingEnabled = false;\n\n  context.globalCompositeOperation = \"source-over\";\n  // context.strokeStyle = \"rgba(0,100,160,1)\";\n  // context.strokeStyle = \"rgba(0,0,0,0.02)\";\n\n\n\n  function showLoading(ele) {\n    d3.select(ele).style(\"cursor\", \"progress\");\n    svg.style(\"cursor\", \"progress\");\n  }\n\n  function hideLoading(ele) {\n    d3.select(ele).style(\"cursor\", null);\n    svg.style(\"cursor\", null);\n  }\n\n  function deferEvent(cbk) {\n    return function(d, i, all) {\n      showLoading(this);\n      setTimeout(() => {\n        cbk(d, i, all);\n        hideLoading(this);\n      },100);\n    };\n  }\n\n  function invertOrdinalScale(scale, x) {\n    // Taken from https://bl.ocks.org/shimizu/808e0f5cadb6a63f28bb00082dc8fe3f\n    // custom invert function\n    var domain = scale.domain();\n    var range = scale.range();\n    var qScale = d3.scaleQuantize().domain(range).range(domain);\n\n    return qScale(x);\n  }\n\n  // Like d3.ascending but supporting null\n  function d3AscendingNull(a, b) {\n    return b === null ? (a === null ? 0 : -1)\n      : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function d3DescendingNull(a, b) {\n    return a === null ? (b === null ? 0 : -1)\n      : b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function onSortLevel(d) {\n    if (d3.event && d3.event.defaultPrevented) return; // dragged\n    if (DEBUG) console.log(\"click \" + d);\n\n\n    dSortBy[d.level] = {\n      attrib:d.attrib,\n      reverse:dSortBy[d.level]!==undefined && dSortBy[d.level].attrib === d.attrib ?\n        !dSortBy[d.level].reverse :\n        false\n    };\n\n    updateSorting(d.level);\n    removeBrushOnLevel(d.level);\n\n    nv.updateData(dataIs, colScales, d.level);\n  }\n\n  function getAttribs(obj) {\n    var attr, res = [];\n    for (attr in obj) {\n      if (obj.hasOwnProperty(attr)) {\n        res.push(attr);\n      }\n    }\n    return res;\n  }\n\n  function drawItem(item, level) {\n    var attrib, i, y ;\n\n    if (yScales[level].bandwidth() > nv.divisionsThreshold) {\n      if (DEBUG) { console.log(\"Add borders\"); }\n    }\n\n    for (i = 0; i < dimensionsOrder.length; i++) {\n      attrib = dimensionsOrder[i];\n      y = Math.round(yScales[level](item[id]) + yScales[level].bandwidth()/2);\n      // y = yScales[level](item[id]) + yScales[level].bandwidth()/2;\n\n      context.beginPath();\n      context.moveTo(Math.round(x(attrib, level)), y);\n      context.lineTo(Math.round(x(attrib, level) + xScale.bandwidth()), y);\n      context.lineWidth = Math.ceil(yScales[level].bandwidth())+1;\n      // context.lineWidth = 1;\n      context.strokeStyle = item[attrib] === undefined ||\n                item[attrib] === null ||\n                item[attrib] === \"\" ||\n                item[attrib] === \"none\" ?\n        \"white\" :\n        colScales.get(attrib)(item[attrib]);\n\n      context.stroke();\n\n\n      //If the range bands are tick enough draw divisions\n      if (yScales[level].bandwidth() > nv.divisionsThreshold*2) {\n        var yLine = Math.round(yScales[level](item[id])) ;\n        // y = yScales[level](item[id])+yScales[level].bandwidth()/2;\n        context.beginPath();\n        context.moveTo(x(attrib, level), yLine);\n        context.lineTo(x(attrib, level) + xScale.bandwidth(), yLine);\n        context.lineWidth = 1;\n        // context.lineWidth = 1;\n        context.strokeStyle = nv.divisionsColor;\n        context.stroke();\n      }\n\n    }\n\n  } // drawItem\n\n  function drawLevelBorder(i) {\n    context.beginPath();\n    context.rect(levelScale(i),\n      yScales[i].range()[0]-1,\n      xScale.range()[1]+1,\n      yScales[i].range()[1]+2-100);\n    context.strokeStyle = \"black\";\n    context.lineWidth = 1;\n    context.stroke();\n  }\n\n\n  function removeBrushOnLevel(lev) {\n    d3.select(\"#level\"+lev)\n      .selectAll(\".brush\")\n      .call(dBrushes[lev].move, null);\n  }\n\n  function removeAllBrushesBut(but) {\n    for (var lev=0; lev< dataIs.length ; lev+=1) {\n      if (lev===but) continue;\n      removeBrushOnLevel(lev);\n    }\n  }\n\n\n  function addBrush(d, i) {\n    dBrushes[i]=\n      d3.brushY()\n        .extent([\n          [x(xScale.domain()[0], i),yScales[i].range()[0]],\n          [x(xScale.domain()[xScale.domain().length-1], i) + xScale.bandwidth()*1.1, yScales[i].range()[1]]\n        ])\n        .on(\"end\", onSelectByRange);\n\n    var _brush = d3.select(this)\n      .selectAll(\".brush\")\n      .data([{\n        data : data[d],\n        level : i\n      }]);\n\n    _brush.enter()\n      .merge(_brush)\n      .append(\"g\")\n      .on(\"mousemove\", onMouseOver)\n      .on(\"click\", onSelectByValue)\n      .on(\"mouseout\", onMouseOut)\n      .attr(\"class\", \"brush\")\n      .call(dBrushes[i])\n      .selectAll(\"rect\")\n      // .attr(\"x\", -8)\n      .attr(\"width\", x(xScale.domain()[xScale.domain().length-1], i) + xScale.bandwidth()*1.1);\n\n    _brush.exit().remove();\n\n\n    // Assigns the indexes on the new level data\n    function assignIndexes(filteredData) {\n      for (var j = 0; j < filteredData.length; j++) {\n        data[filteredData[j]].__i[i+1] = j;\n      }\n    }\n\n    // Applies the filters for the current level\n    function applyFilters() {\n      let before, after;\n\n      if (DEBUG) console.log(\"applyFilters \", filtersByLevel);\n\n      before = performance.now();\n      // Check if each item fits on any filter\n      var filteredData = dataIs[i].filter(d => {\n        data[d].visible = false;\n        for (let filter of filtersByLevel[i]) {\n          if (filter.filter(data[d])) {\n            data[d].visible = true;\n            break;\n          }\n        }\n        return data[d].visible;\n      });\n\n\n      // var filteredData = filtersByLevel[i].reduce(reduceFilters, dataIs[i]);\n      after = performance.now();\n      if (DEBUG) console.log(\"Applying filters \" + (after-before) + \"ms\");\n\n\n      return filteredData;\n\n    }\n\n    function onSelectByRange() {\n      // if (DEBUG) console.log(\"brushended\", d3.event);\n      showLoading(this);\n      if (!d3.event.sourceEvent) return; // Only transition after input.\n      if (!d3.event.selection){\n        if (DEBUG) console.log(\"Empty selection\", d3.event.selection,d3.event.type, d3.event.sourceEvent);\n        // return;\n        // d3.event.preventDefault();\n        // onSelectByValueFromCoords(d3.event.sourceEvent.clientX, d3.event.sourceEvent.clientY);\n        return; // Ignore empty selections.\n      }\n\n      removeAllBrushesBut(i);\n      var before = performance.now();\n      var brushed = d3.event.selection;\n\n      var\n        // first = dData.get(invertOrdinalScale(yScales[i], brushed[0] -yScales[i].bandwidth())),\n        first = dData.get(invertOrdinalScale(yScales[i], brushed[0])),\n        // last = dData.get(invertOrdinalScale(yScales[i], brushed[1] -yScales[i].bandwidth()))\n        last = dData.get(invertOrdinalScale(yScales[i], brushed[1]));\n\n      const newFilter = new FilterByRange({first, last, level:i});\n      if (d3.event.sourceEvent.shiftKey) {\n        // Append the filter\n        filtersByLevel[i].push(newFilter);\n      } else {\n        // Remove previous filters\n        filtersByLevel[i]= [ newFilter ];\n      }\n\n\n      var filteredData = applyFilters();\n\n      //Assign the index\n      assignIndexes(filteredData);\n\n      var after = performance.now();\n      if (DEBUG) console.log(\"Brushend filtering \" + (after-before) + \"ms\");\n\n\n      if (DEBUG) console.log(\"Computing new data\");\n      var newData = dataIs;\n      if (filteredData.length===0) {\n        if (DEBUG) console.log(\"Empty selection!\");\n        return;\n      } else {\n        newData = dataIs.slice(0,i+1);\n        newData.push(filteredData);\n      }\n\n\n      nv.updateData(\n        newData,\n        colScales\n      );\n      if (DEBUG) console.log(\"out of updateData\");\n      if (DEBUG) console.log(\"Selected \" + filteredData.length + \" calling updateCallback\");\n      updateCallback(nv.getVisible());\n\n\n      hideLoading(this);\n    }// onSelectByRange\n\n    function onSelectByValue() {\n      if (DEBUG) console.log(\"click\");\n      showLoading(this);\n      var clientY = d3.mouse(d3.event.target)[1],\n        clientX = d3.mouse(d3.event.target)[0];\n\n\n      onSelectByValueFromCoords(clientX, clientY);\n\n      hideLoading(this);\n    }\n\n\n    function onSelectByValueFromCoords(clientX, clientY) {\n      if (DEBUG) console.log(\"onSelectByValueFromCoords\", clientX, clientY);\n\n\n      removeAllBrushesBut(-1); // Remove all brushes\n\n      var before = performance.now();\n      var itemId = invertOrdinalScale(yScales[i], clientY);\n      var after = performance.now();\n      if (DEBUG) console.log(\"invertOrdinalScale \" + (after-before) + \"ms\");\n\n      var itemAttr = invertOrdinalScale(xScale, clientX - levelScale(i));\n      if (itemAttr === undefined) return;\n\n      var sel = dData.get(itemId);\n      const newFilter = new FilterByValue({sel, itemAttr});\n      if (d3.event.shiftKey) {\n        // Append the filter\n        filtersByLevel[i].push(newFilter);\n      } else {\n        // Remove previous filters\n        filtersByLevel[i]= [ newFilter ];\n      }\n\n\n      var filteredData = applyFilters();\n\n\n      // var filteredData = dataIs[i].filter(function (i) {\n      //   data[i].visible = data[i][itemAttr] === sel[itemAttr];\n      //   return data[i].visible;\n      // });\n\n      assignIndexes(filteredData);\n\n      var newData = dataIs.slice(0,i+1);\n      newData.push(filteredData);\n\n\n      nv.updateData(\n        newData,\n        colScales\n      );\n\n      if (DEBUG) console.log(\"Selected \" + nv.getVisible().length + \" calling updateCallback\");\n      updateCallback(nv.getVisible());\n    }\n  } // addBrush\n\n\n  function onMouseOver(overData) {\n    var screenY = d3.mouse(d3.event.target)[1],\n      screenX = d3.mouse(d3.event.target)[0];\n\n    var itemId = invertOrdinalScale(yScales[overData.level], screenY);\n    var itemAttr = invertOrdinalScale(xScale, screenX - levelScale(overData.level));\n    var d = dData.get(itemId);\n    // var itemId = d.data.filter(function (e) {\n    //   var y = yScales[d.level](e[id]);\n    //   e.visible = y >= screenY && y < screenY + yScales[d.level];\n    //   return e.visible;\n    // });\n\n    svg.select(\".nvTooltip\")\n      .attr(\"transform\", \"translate(\" + (screenX) + \",\" + (screenY+20) + \")\")\n      .call(function (tool) {\n        tool.select(\".tool_id\")\n          .text(itemId);\n        tool.select(\".tool_value_name\")\n          .text(itemAttr + \" : \" );\n        tool.select(\".tool_value_val\")\n          .text(d[itemAttr]);\n\n      });\n  }\n\n  function onMouseOut() {\n    svg.select(\".nvTooltip\")\n      .attr(\"transform\", \"translate(\" + (-200) + \",\" + (-200) + \")\")\n      .call(function (tool) {\n        tool.select(\".tool_id\")\n          .text(\"\");\n        tool.select(\".tool_value_name\")\n          .text(\"\");\n        tool.select(\".tool_value_val\")\n          .text(\"\");\n\n      });\n\n  }\n\n  function drawBrushes(updateBrushes) {\n    var attribs = xScale.domain();\n\n    var levelOverlay = svg.select(\".attribs\")\n      .selectAll(\".levelOverlay\")\n      .data(dataIs);\n\n    var levelOverlayEnter = levelOverlay.enter()\n      .append(\"g\");\n\n\n    levelOverlayEnter\n      .attr(\"class\", \"levelOverlay\")\n      .attr(\"id\", function (d,i) { return \"level\" +i; });\n\n    // Bugfix: when adding all attribs we need to update the brush\n    if (updateBrushes) {\n      levelOverlayEnter\n        .merge(levelOverlay)\n        .each(addBrush);\n    } else {\n      levelOverlayEnter\n        .each(addBrush);\n    }\n\n    var attribOverlay = levelOverlayEnter.merge(levelOverlay)\n      .selectAll(\".attribOverlay\")\n      .data(function (_, i) {\n        return attribs.map(function (a) {\n          return {attrib:a, level:i};\n        });\n      });\n\n    var attribOverlayEnter = attribOverlay\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"attribOverlay\")\n      .style(\"cursor\", \"pointer\");\n\n    attribOverlayEnter\n      .merge(attribOverlay)\n      .attr(\"transform\", function (d) {\n        return \"translate(\" +\n          x(d.attrib, d.level) +\n          \",\" +\n          yScales[d.level].range()[0] +\n          \")\";\n      });\n\n    attribOverlayEnter\n      .append(\"rect\")\n      .merge(attribOverlay.select(\"rect\"))\n\n      .attr(\"fill\", \"none\")\n      // .style(\"opacity\", \"0.1\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .attr(\"width\", function () {\n        return xScale.bandwidth()*1.1;\n      })\n      .attr(\"height\", function (d) { return yScales[d.level].range()[1] - yScales[d.level].range()[0]; });\n\n    attribOverlayEnter\n      .append(\"text\")\n      .merge(attribOverlay.select(\"text\"))\n      .style(\"cursor\", \"point\")\n      .style(\"-webkit-user-select\", \"none\")\n      .style(\"-moz-user-select\", \"none\")\n      .style(\"-ms-user-select\", \"none\")\n      .style(\"user-select\", \"none\")\n      .text(function (d) {\n        return d.attrib === \"__seqId\" ?\n          \"sequential Index\" :\n          d.attrib +\n          (dSortBy[d.level]!==undefined &&\n            dSortBy[d.level].attrib === d.attrib ?\n            dSortBy[d.level].reverse ?\n              \" \" :\n              \" \" :\n            \"\");\n      })\n      .attr(\"x\", xScale.bandwidth()/2)\n      .attr(\"y\", 0)\n      .style(\"font-weight\", function (d) {\n        return (dSortBy[d.level]!==undefined &&\n          dSortBy[d.level].attrib === d.attrib ?\n          \"bolder\" :\n          \"normal\");\n      })\n      .style(\"font-family\", \"sans-serif\")\n      .style(\"font-size\", nv.attribFontSize+\"px\")\n      .on(\"click\", deferEvent(onSortLevel))\n      .call(d3.drag()\n        .container(attribOverlayEnter.merge(attribOverlay).node())\n        .on(\"start\", attribDragstarted)\n        .on(\"drag\", attribDragged)\n        .on(\"end\", attribDragended))\n      .on(\"mousemove\", function () {\n        var sel = d3.select(this);\n        sel = sel.transition!==undefined? sel.transition().duration(150) : sel;\n        sel\n          .style(\"font-size\", nv.attribFontSizeSelected+\"px\");\n      })\n      .on(\"mouseout\", function () {\n        var sel = d3.select(this);\n        sel = sel.transition!==undefined ? sel.transition().duration(150) : sel;\n        sel\n          .style(\"font-size\", nv.attribFontSize+\"px\");\n      })\n      .attr(\"transform\", \"rotate(-45)\");\n\n\n    levelOverlayEnter\n      .append(\"text\")\n      .merge(levelOverlay.select(\"text.numNodesLabel\"))\n      .attr(\"class\", \"numNodesLabel\")\n      .style(\"font-family\", \"sans-serif\")\n      .style(\"pointer-events\", \"none\")\n      .merge(levelOverlay.select(\".numNodesLabel\"))\n      .attr(\"y\", function (_, i) {\n        return yScales[i].range()[1] + 15;\n      })\n      .attr(\"x\", function (_, i) {\n        return  levelScale(i);\n      })\n      .text(function (d) {\n        return fmt(d.length);\n      });\n\n\n    attribOverlay.exit().remove();\n    levelOverlay.exit().remove();\n  } // drawBrushes\n\n  function attribDragstarted(d) {\n    if (!d3.event.sourceEvent.shiftKey)\n      return;\n\n    if (DEBUG) console.log(\"start\", d);\n    d3.select(this.parentNode)\n      .attr(\"transform\", function (d) {\n        return \"translate(\" +\n          (d3.event.x + nv.attribFontSize/2) +\n          \",\" +\n          yScales[d.level].range()[0] +\n          \")\";\n      });\n\n  }\n\n  function attribDragged(d) {\n    // var attribInto = invertOrdinalScale(xScale, d3.everythingnt.x + nv.attribFontSize/2 - levelScale(d.level));\n    // if (DEBUG) console.log(d3.event.x, d3.event.y, attribInto);\n    if (!d3.event.sourceEvent.shiftKey)\n      return;\n\n    d3.select(this.parentNode)\n      .attr(\"transform\", function (d) {\n        return \"translate(\" +\n          (d3.event.x + nv.attribFontSize/2) +\n          \",\" +\n          yScales[d.level].range()[0] +\n          \")\";\n      });\n  }\n\n  function attribDragended(d) {\n    if (!d3.event.sourceEvent.shiftKey)\n      return;\n    if (DEBUG) console.log(\"end\", d);\n\n\n    var attrDraggedInto = invertOrdinalScale(xScale, d3.event.x + nv.attribFontSize/2 - levelScale(d.level));\n    var pos;\n    d3.select(this.parentNode)\n      .attr(\"transform\", function (d) {\n        return \"translate(\" +\n          x(d.attrib, d.level) +\n          \",\" +\n          yScales[d.level].range()[0] +\n          \")\";\n      });\n\n    if (attrDraggedInto!== d.attrib) {\n      pos = dimensionsOrder.indexOf(attrDraggedInto);\n      moveAttrToPos(d.attrib, pos);\n      nv.updateData(dataIs);\n    }\n\n  }\n\n  function drawCloseButton() {\n    var maxLevel = dataIs.length-1;\n    svg.select(\"#closeButton\")\n      .style(\"display\", dataIs.length === 1 ? \"none\":\"block\")\n      .attr(\"transform\", \"translate(\" + (levelScale(maxLevel) + levelScale.bandwidth() - nv.levelsSeparation +15)  + \",\" + yScales[maxLevel].range()[0] + \")\");\n  }\n\n  // Links between nodes\n  function drawLink(link) {\n    var\n      lastAttrib = xScale.domain()[xScale.domain().length-1],\n      rightBorder = x(lastAttrib, dataIs.length-1)+ xScale.bandwidth(),\n      ys = yScales[dataIs.length-1](link.source[id]) + yScales[dataIs.length-1].bandwidth()/2,\n      yt = yScales[dataIs.length-1](link.target[id]) + yScales[dataIs.length-1].bandwidth()/2,\n      miny = Math.min(ys, yt),\n      maxy = Math.max(ys, yt),\n      midy = maxy-miny;\n    context.moveTo(rightBorder, miny); //starting point\n    context.quadraticCurveTo(\n      rightBorder + midy/6, miny + midy/2, // mid point\n      rightBorder, maxy // end point\n    );\n  }\n\n  function drawLinks() {\n    if (!links.length) return;\n    if (DEBUG) console.log(\"Draw links \", links[links.length-1].length , links);\n    context.save();\n    context.beginPath();\n    context.strokeStyle = nv.linkColor;\n    context.globalAlpha = Math.min(1,\n      Math.max(0.1,1000 / links[links.length-1].length )\n    ); // More links more transparency\n    // context.lineWidth = 0.5;\n    visibleLinks.forEach(drawLink);\n    context.stroke();\n    context.restore();\n  }\n\n\n  function drawLine(points, width, color, close) {\n    context.beginPath();\n    points.forEach(function (p, i) {\n      if (i === 0) {\n        context.moveTo(p.x, p.y);\n      } else {\n        context.lineTo(p.x, p.y);\n      }\n    });\n    context.lineWidth = width;\n    if (close) {\n      context.fillStyle = color;\n      context.closePath();\n      context.fill();\n    } else {\n      context.strokeStyle = color;\n      context.stroke();\n    }\n  }\n\n  function drawLevelConvections(level) {\n    if (level <= 0) {\n      return;\n    }\n    dataIs[level].representatives.forEach(function (item) {\n      // Compute the yPrev by calculating the index of the corresponding representative\n      var iOnPrev = dData.get(data[item][id]).__i[level-1];\n      var iRep = Math.floor(iOnPrev - iOnPrev%dataIs[level-1].itemsPerpixel);\n      // if (DEBUG) console.log(\"i rep = \"+ iRep);\n      // if (DEBUG) console.log(data[level-1][iRep]);\n      // if (DEBUG) console.log(yScales[level-1](data[level-1][iRep][id]));\n      var locPrevLevel = {\n        x: levelScale(level-1) + xScale.range()[1],\n        y: yScales[level-1]( data[dataIs[level-1][iRep]] [id])\n      };\n      var locLevel = {\n        x: levelScale(level),\n        y: yScales[level](data[item][id]) };\n\n      var points = [ locPrevLevel,\n        {x: locPrevLevel.x + nv.levelsSeparation * 0.3, y: locPrevLevel.y},\n        {x: locLevel.x - nv.levelsSeparation * 0.3, y: locLevel.y},\n        locLevel,\n        {x: locLevel.x, y: locLevel.y + yScales[level].bandwidth()},\n        {x: locLevel.x - nv.levelsSeparation * 0.3, y: locLevel.y + yScales[level].bandwidth()},\n        {x: locPrevLevel.x + nv.levelsSeparation * 0.3, y: locPrevLevel.y + yScales[level - 1].bandwidth()},\n        {x: locPrevLevel.x, y: locPrevLevel.y + yScales[level -1 ].bandwidth()},\n        locPrevLevel\n\n      ];\n      drawLine(points, 1, nv.levelConvectionsColor);\n      drawLine(points, 1, nv.levelConvectionsColor, true);\n    });\n  }\n\n\n\n  nv.initData = function (mData,  mColScales) {\n    var before = performance.now();\n    // getAttribs(mData[0][0]);\n    colScales  = mColScales;\n    colScales.keys().forEach(function (d) {\n      dDimensions.set(d, true);\n    });\n    dData = d3.map();\n    for (var i = 0; i < data.length ; i++) {\n      var d = data[i];\n      d.__seqId = i; //create a default id with the sequential number\n      dData.set(d[id], d);\n      d.__i={};\n      d.__i[0] = i;\n\n    }\n\n    filtersByLevel = [];\n    filtersByLevel[0] = []; // Initialice filters as empty for lev 0\n    // nv.updateData(mData, mColScales, mSortByAttr);\n\n    var after = performance.now();\n    if (DEBUG) console.log(\"Init data \" + (after-before) + \"ms\");\n\n  };\n\n  function updateSorting(levelToUpdate) {\n    if (!dSortBy.hasOwnProperty(levelToUpdate)) {\n      if (DEBUG) console.log(\"UpdateSorting called without attrib in dSortBy\", levelToUpdate, dSortBy);\n      return;\n    }\n\n    var before = performance.now();\n\n\n    const sort = dSortBy[levelToUpdate];\n    dataIs[levelToUpdate] = dataIs[levelToUpdate].sort(function (a, b) {\n      return sort.reverse ?\n        d3DescendingNull(data[a][sort.attrib], data[b][sort.attrib]) :\n        d3AscendingNull(data[a][sort.attrib], data[b][sort.attrib]);\n    });\n    dataIs[levelToUpdate].forEach(function (row,i) { data[row].__i[levelToUpdate] = i; });\n\n    var after = performance.now();\n    if (DEBUG) console.log(\"Sorting level \" + levelToUpdate + \" \" + (after-before) + \"ms\");\n\n  }\n\n  function updateScales(levelToUpdate) {\n    if (DEBUG) console.log(\"Update scales\");\n    var before = performance.now();\n    // yScales=[];\n    var lastLevel = dataIs.length-1;\n\n    if (DEBUG) console.log(\"Delete unvecessary scales\");\n    // Delete unvecessary scales\n    yScales.splice(lastLevel+1, yScales.length);\n    levelToUpdate = levelToUpdate!==undefined ? levelToUpdate : lastLevel;\n    yScales[levelToUpdate] = d3.scaleBand()\n      .range([y0, height-nv.margin - 30])\n      .paddingInner(0.0)\n      .paddingOuter(0);\n\n\n    if (DEBUG) console.log(\"Compute representatives\");\n    var representatives = [];\n    if (dataIs[levelToUpdate].length>height) {\n      var itemsPerpixel = Math.max(Math.floor(dataIs[levelToUpdate].length / (height*2)), 1);\n      if (DEBUG) console.log(\"itemsPerpixel\", itemsPerpixel);\n      dataIs[levelToUpdate].itemsPerpixel = itemsPerpixel;\n      for (var i = 0; i< dataIs[levelToUpdate].length; i+=itemsPerpixel ) {\n        representatives.push(dataIs[levelToUpdate][i]);\n      }\n    } else {\n      dataIs[levelToUpdate].itemsPerpixel=1;\n      representatives = dataIs[levelToUpdate];\n    }\n    dataIs[levelToUpdate].representatives = representatives;\n    yScales[levelToUpdate].domain(representatives.map(function (rep) { return data[rep][id];}));\n\n\n    // data.forEach(function (levelData, i) {\n    //   yScales[i] = d3.scaleBand()\n    //     .range([y0, height-nv.margin - 30])\n    //     .paddingInner(0.0)\n    //     .paddingOuter(0);\n    //   yScales[i].domain(levelData.map(function (d) {\n    //     return d[id];\n    //   })\n    //   );\n    // });\n\n\n    if (DEBUG) console.log(\"Update color scale domains\");\n    // Update color scales domains\n\n    // colScales = d3.map();\n    dDimensions.keys().forEach(\n      function (attrib) {\n        if (attrib === \"visible\") return;\n        var scale = colScales.get(attrib);\n        if (scale.__type===\"seq\" || scale.__type===\"date\") {\n          scale.domain(d3.extent(dataIs[0].map(function (i) {\n            return data[i][attrib];\n          }))); //TODO: make it compute it based on the local range\n        } else if (scale.__type===\"div\") {\n          const [min, max] = d3.extent(dataIs[0].map(function (i) {\n            return data[i][attrib];\n          }));\n          const absMax = Math.max(-min, max); // Assumes diverging point on 0\n          scale.domain([-absMax, absMax]);\n        }\n        colScales.set(attrib, scale);\n      }\n    );\n\n    xScale\n      .domain(dimensionsOrder)\n      .range([0, nv.attribWidth * (dDimensions.keys().length)])\n      .paddingInner(0.1)\n      .paddingOuter(0);\n    levelScale.domain(dataIs.map(function (d,i) { return i; }))\n      .range([x0+nv.margin, ((xScale.range()[1] + nv.levelsSeparation) * dataIs.length) + x0])\n      .paddingInner(0)\n      .paddingOuter(0);\n\n    var after = performance.now();\n    if (DEBUG) console.log(\"Updating Scales \" + (after-before) + \"ms\");\n  }\n\n  nv.updateData = function (mDataIs, mColScales, levelToUpdate) {\n    if (DEBUG) console.log(\"updateData\");\n    var before = performance.now();\n    var ctxWidth;\n    if (typeof mDataIs !== typeof []) {\n      console.error(\"navio updateData didn't receive an array\");\n      return;\n    }\n\n    colScales = mColScales !== undefined ? mColScales: colScales;\n    dataIs = mDataIs;\n\n\n    // Delete filters on unused levels\n    filtersByLevel.splice(mDataIs.length);\n    // Initialize new filter level\n    filtersByLevel[mDataIs.length] = [];\n\n    if (links.length>0) {\n      visibleLinks = links.filter(function (d) {\n        return d.source.visible && d.target.visible;\n      });\n    }\n\n    // Delete unnecesary brushes\n    dBrushes.splice(mDataIs.length);\n\n    // Update the sorting of the last level\n    updateSorting(mDataIs.length-1);\n    updateScales(levelToUpdate);\n\n    ctxWidth = levelScale.range()[1] + nv.margin + x0;\n    d3.select(canvas)\n      .attr(\"width\", ctxWidth)\n      .attr(\"height\", height)\n      .style(\"width\", ctxWidth)\n      .style(\"height\", height+\"px\");\n    canvas.style.width = ctxWidth+\"px\";\n    canvas.style.height = height+\"px\";\n\n    svg\n      .attr(\"width\", ctxWidth)\n      .attr(\"height\", height);\n    nv.update();\n    var after = performance.now();\n    if (DEBUG) console.log(\"Updating data \" + (after-before) + \"ms\");\n\n  };\n\n  function deleteOneLevel() {\n    if (dataIs.length<=1) return;\n\n    showLoading(this);\n    if (DEBUG) console.log(\"Delete one level\");\n    removeBrushOnLevel(dataIs.length-2);\n    dataIs[dataIs.length-2].forEach(function (d) { data[d].visible=true; });\n\n    dataIs = dataIs.slice(0, dataIs.length-1);\n\n    nv.updateData(dataIs, colScales);\n    updateCallback(nv.getVisible());\n\n    hideLoading(this);\n  }\n\n  function moveAttrToPos(attr, pos) {\n    var i = dimensionsOrder.indexOf(attr);\n    if ( i === -1)  { console.err(\"moveAttrToPos attr not found\", attr); return; }\n    if ( pos > dimensionsOrder.length || pos < 0) { console.err(\"moveAttrToPos pos out of bounds\", pos, dimensionsOrder.length); return; }\n    dimensionsOrder.splice(i, 1);\n    dimensionsOrder.splice(pos, 0, attr);\n  }\n\n\n\n  nv.update = function(_updateBrushes) {\n    var updateBrushes = _updateBrushes !== undefined ? _updateBrushes : false;\n\n    var before = performance.now();\n\n    var w = levelScale.range()[1] + nv.margin + x0;\n    context.clearRect(0,0,w+1,height+1);\n    dataIs.forEach(function (levelData, i) {\n      // var itemsPerpixel = Math.floor(levelData.length/height);\n      // if (itemsPerpixel>1) { //draw one per pixel\n      //   for (var j = 0; j< levelData.length; j+=(itemsPerpixel-1)) {\n      //     drawItem(levelData[j], i);\n      //   }\n      // } else { // draw all\n\n      drawLevelBorder(i);\n      levelData.representatives.forEach(function (rep) {\n        drawItem(data[rep], i);\n      });\n      // }\n\n\n      drawLevelConvections(i);\n\n    });\n\n\n    drawLinks();\n\n    drawBrushes(updateBrushes);\n    drawCloseButton();\n\n    var after = performance.now();\n    if (DEBUG) console.log(\"Redrawing \" + (after-before) + \"ms\");\n\n  };\n\n  nv.addAttrib = function (attr, scale) {\n    if (dimensionsOrder.indexOf(attr)!== -1) return;\n    dimensionsOrder.push(attr);\n    colScales.set(attr, scale);\n    return nv;\n  };\n\n  nv.addSequentialAttrib = function (attr, _scale ) {\n    const domain = data!==undefined && data.length>0 ?\n      d3.extent(data, function (d) { return d[attr]; }) :\n      [0, 1];   //if we don\"t have data, set the default domain\n    const scale = _scale ||\n      d3.scaleSequential(defaultColorInterpolator)\n        .domain(domain);\n    scale.__type = \"seq\";\n    nv.addAttrib(attr, scale);\n    return nv;\n  };\n\n  // Same as addSequentialAttrib but with a different color\n  nv.addDateAttrib = function (attr, _scale ) {\n    const domain = data!==undefined && data.length>0 ?\n      d3.extent(data, function (d) { return d[attr]; }) :\n      [0, 1];\n\n    const scale = _scale ||\n      d3.scaleSequential(defaultColorInterpolatorDate)\n        .domain(domain); //if we don\"t have data, set the default domain\n    nv.addAttrib(attr,scale);\n\n    scale.__type = \"date\";\n    return nv;\n  };\n\n  // Adds a diverging scale\n  nv.addDivergingAttrib = function (attr, _scale ) {\n    const domain = data!==undefined && data.length>0 ?\n      d3.extent(data, function (d) { return d[attr]; }) :\n      [-1,  1];\n    const scale = _scale ||\n      d3.scaleSequential(defaultColorInterpolatorDiverging)\n        .domain([domain[0], domain[1]]); //if we don\"t have data, set the default domain\n    scale.__type = \"div\";\n    nv.addAttrib(attr, scale);\n    return nv;\n  };\n\n  nv.addCategoricalAttrib = function (attr, _scale ) {\n    const scale = _scale ||\n      d3.scaleOrdinal(d3.schemeCategory10);\n    scale.__type = \"cat\";\n    nv.addAttrib(attr, scale);\n\n    return nv;\n  };\n\n  function findNotNull(data, attr) {\n    let i;\n    for ( i = 0; i<nv.howManyItemsShouldSearchForNotNull && i< data.length; i++ ) {\n      if (data[0][attr] !== null &&\n        data[0][attr] !== undefined &&\n        data[0][attr] !== \"\") {\n        return data[i][attr];\n      }\n    }\n\n    return data[i][attr];\n  }\n\n  // Adds all the attributes on the data, or all the attributes provided on the list based on their types\n  nv.addAllAttribs = function (_attribs) {\n    if (!data || !data.length) throw Error(\"addAllAttribs called without data to guess the attribs. Make sure to call it after setting the data\");\n\n    var attribs = _attribs!==undefined ? _attribs : getAttribs(data[0]);\n    attribs.forEach(function (attr) {\n      if (attr === \"__seqId\" ||\n        attr === \"__i\")\n        return;\n\n      const dataSample = findNotNull(data, attr);\n      if (dataSample === null ||\n        dataSample === undefined ||\n        dataSample === \"\") {\n        nv.addCategoricalAttrib(attr);\n      } else if (typeof(dataSample) === typeof(0)) {\n        // Numbers\n        if (d3.min(data, d=> d[attr]) < 0) {\n          nv.addDivergingAttrib(attr);\n        } else {\n          nv.addSequentialAttrib(attr);\n        }\n      } else if (typeof(dataSample) === typeof(new Date())) {\n        nv.addDateAttrib(attr);\n      } else {\n        // Default categories\n        nv.addCategoricalAttrib(attr);\n\n      }\n    });\n\n    nv.data(data);\n    drawBrushes(true); // updates brushes width\n    return nv;\n  };\n\n\n  nv.data = function(_) {\n    if (!colScales.has(\"visible\")) {\n      nv.addAttrib(\"visible\",\n        d3.scaleOrdinal()\n          .domain([false,true])\n          .range(visibleColorRange)\n          //, \"#cddca3\", \"#8c6d31\", \"#bd9e39\"]\n      );\n      moveAttrToPos(\"visible\", 0);\n    }\n    if (!colScales.has(\"__seqId\")) {\n      nv.addSequentialAttrib(\n        \"__seqId\"\n      );\n      moveAttrToPos(\"__seqId\", 1);\n    }\n\n    if (arguments.length) {\n      _.forEach(function (d) {\n        d.visible = true;\n      });\n\n      data = _;\n      dataIs = [data.map(function (_, i) { return i; })];\n\n\n      nv.initData(\n        dataIs,\n        colScales\n      );\n      nv.updateData(\n        dataIs,\n        colScales\n      );\n      return nv;\n    } else {\n      return data[0];\n    }\n  };\n\n  nv.getVisible = function() {\n    return dataIs[dataIs.length-1].filter(function (d) { return data[d].visible; }).map(function (d) { return data[d]; });\n  };\n\n\n  nv.updateCallback = function(_) {\n    return arguments.length ? (updateCallback = _, nv) : updateCallback;\n  };\n\n  nv.visibleColorRange = function(_) {\n    return arguments.length ? (visibleColorRange = _, nv) : visibleColorRange;\n  };\n\n  nv.defaultColorInterpolator = function(_) {\n    return arguments.length ? (defaultColorInterpolator = _, nv) : defaultColorInterpolator;\n  };\n\n  nv.id = function(_) {\n    return arguments.length ? (id = _, nv) : id;\n  };\n\n  nv.links = function(_) {\n    if (arguments.length) {\n      links = _;\n      return nv;\n    } else {\n      return links;\n    }\n  };\n\n  return nv;\n}\n\nexport default navio;","import React, { Component } from 'react';\n\nimport { Row, Col } from 'antd';\nimport { connect } from 'react-redux';\nimport { scaleOrdinal, scaleLinear, scaleTime, scalePow } from 'd3-scale';\nimport { select } from 'd3-selection';\nimport ActionGroup from './ActionGroup';\nimport Side from './sidebar/Sider';\nimport { updateAttribute, updateFilteredData } from './../../../actions';\nimport './sidebar.css';\nimport * as d3ScaleChromatic from \"d3-scale-chromatic\";\n\nimport navio from '../../../navio.js';\n\nconst cat = 'CATEGORICAL';\nconst seq = 'SEQUENTIAL';\nconst dat = 'DATE';\nconst ord = 'ORDINAL';\nclass NavioContainer extends Component {\n  componentDidMount() {\n    this.setupNavio();\n  }\n  componentDidUpdate() {\n    const { updated, updateAttribute } = this.props;\n    if (updated) {\n      this.deleteWidget();\n      updateAttribute();\n      this.setupNavio();\n    }\n  }\n  deleteWidget() {\n    var myNode = document.getElementById(\"vis\");\n    while (myNode.firstChild) {\n        myNode.removeChild(myNode.firstChild);\n    }\n  }\n  getScaleOrdinalScheme = (scheme) => {\n    switch(scheme) {\n      case 'scheme10':\n        return scaleOrdinal(d3ScaleChromatic.schemeCategory10);\n      default:\n        return scaleOrdinal(d3ScaleChromatic.schemeCategory10);\n    }\n  }\n  getScaleOrdinalColor = (color) => {\n    switch (color) {\n      case 'blue':\n        return scaleOrdinal(d3ScaleChromatic.schemeBlues);\n      case 'purple':\n        return scaleOrdinal(d3ScaleChromatic.schemePurples);\n      case 'red':\n        return scaleOrdinal(d3ScaleChromatic.schemeReds);\n      case 'green':\n        return scaleOrdinal(d3ScaleChromatic.schemeGreens);\n      case 'gray':\n        return scaleOrdinal(d3ScaleChromatic.schemeGreys);\n      case 'orange':\n        return scaleOrdinal(d3ScaleChromatic.schemeOranges);\n      default:\n        return scaleLinear(d3ScaleChromatic.schemeOranges);\n\n    }\n  }\n  getScaleTimeColor = (color) => {\n    switch (color) {\n      case 'blue':\n        return scaleTime(d3ScaleChromatic.schemeBlues);\n      case 'purple':\n        return scaleTime(d3ScaleChromatic.schemePurples);\n      case 'red':\n        return scaleTime(d3ScaleChromatic.schemeReds);\n      case 'green':\n        return scaleTime(d3ScaleChromatic.schemeGreens);\n      case 'gray':\n        return scaleTime(d3ScaleChromatic.schemeGreys);\n      case 'orange':\n        return scaleTime(d3ScaleChromatic.schemeOranges);\n      default:\n        return scaleTime(d3ScaleChromatic.schemeGreys);\n    }\n  }\n  setupNavio = () => {\n    this.nn = navio(select(this.target), 600).updateCallback(this.props.updateFilteredData);\n    for (var i = 0; i < this.props.attributes.length; i++) {\n        let d = this.props.attributes[i];\n        if (d.checked) {\n          let color;\n          switch (d.type) {\n            case cat:\n              color = this.getScaleOrdinalScheme(d.color);\n              this.nn.addCategoricalAttrib(d.name);\n              break;\n            default:\n              if (d.data === dat) {\n                color = this.getScaleTimeColor(d.color);\n                this.nn.addSequentialAttrib(d.name,\n                        scalePow()\n                          .range([d3ScaleChromatic.interpolatePurples(0), d3ScaleChromatic.interpolatePurples(1)]))\n                break;\n              }\n              else {\n                  color = this.getScaleOrdinalColor(d.color);\n                  this.nn.addSequentialAttrib(d.name);\n                  break;\n              }\n          }\n      }\n    }\n    this.nn.data(this.props.data);\n  }\n\n  render () {\n    const { showSidebar } = this.props;\n    const sidebarStyles = ['sidebar'];\n    if (!showSidebar) {sidebarStyles.push('hide')}\n    return (\n      <div>\n        <ActionGroup />\n        <Row>\n          <Col span={10} className={sidebarStyles.join(' ')}>\n            <Side />\n          </Col>\n          <Col span={showSidebar ? 14 : 24}>\n            <div\n              style={{ width: '100%', overflowX: 'scroll', minHeight: '700px' }}\n              id=\"vis\"\n              ref={(target) => this.target = target }\n            />\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  showSidebar: state.ui.showSidebar,\n  attributes: state.shipyard.attributes,\n  data: state.shipyard.data,\n  updated: state.shipyard.updated,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  updateAttribute: () => dispatch(updateAttribute()),\n  updateFilteredData: data => dispatch(updateFilteredData(data)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavioContainer);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Row, Table } from 'antd';\n\nconst Sample = ({ exportData, attributes }) => {\n  const preview = exportData.slice(0);\n  let columns = [];\n  attributes.forEach(a => {\n    if (a.data !== 'DATE') {\n      let column = {};\n      column.title = a.name;\n      column.dataIndex = a.name;\n      column.key = a.name;\n      column.width = 150;\n      columns.push(column);\n    }\n  });\n  preview.forEach(p => { p.key = p.__seqId });\n  return (\n    <Row>\n      <Table bordered pagination={true} dataSource={preview} columns={columns} scroll={{ x: columns.length * 150, y: '70vh' }} />\n    </Row>\n  );\n};\n\nconst mapStateToProps = state => ({\n  exportData: state.shipyard.exportData,\n  attributes: state.shipyard.attributes,\n});\n\nexport default connect(mapStateToProps)(Sample);\n","import React from 'react';\nimport { Row, Col } from 'antd';\nimport { connect } from 'react-redux';\nimport Loader from './loader/Loader';\nimport NavioContainer from './navio-container/NavioContainer';\nimport Sample from './sample-data/Sample';\n\n\nconst Playground = ({ dataLoaded, showSidebar }) => {\n  return (\n    <div style={{ height: '100%' }}>\n      <div>\n        {\n          dataLoaded ?\n          <Row>\n            <Col span={12}>\n              <NavioContainer />\n            </Col>\n            <Col span={12} style={{ marginTop: '40px' }}>\n              <Sample />\n            </Col>\n          </Row>\n          :\n          <Loader />\n        }\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  dataLoaded: state.ui.dataLoaded,\n  showSidebar: state.ui.showSidebar,\n});\n\nexport default connect(mapStateToProps)(Playground);\n","import { Affix, Layout } from 'antd';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport HeaderComponent from './header/Header';\nimport FooterComponent from './footer/Footer';\nimport Playground from './playground/Playground';\n\nconst { Header, Content, Footer } = Layout;\nconst headerStyle = {\n  marginBottom: '1em',\n  padding: 0,\n  backgroundColor: 'white',\n  boxShadow: '0 5px 4px rgba(0,0,0,0.15), 0 4px 4px rgba(0,0,0,0.12)',\n};\nconst mainStyle = {\n  minHeight: '100vh',\n};\nconst App = loading => (\n  <div style={mainStyle}>\n    <Layout>\n      <Affix>\n        <Header style={headerStyle}>\n          <HeaderComponent />\n        </Header>\n      </Affix>\n      <Content>\n        { loading ? <Playground /> : 'loading' }\n      </Content>\n      <Footer>\n        <FooterComponent />\n      </Footer>\n    </Layout>\n  </div>\n);\n\nconst mapStateToProps = state => ({\n  loading: state.ui.loading,\n});\n\nexport default connect(mapStateToProps)(App);\n","import {\n  SET_DATA,\n  RESET_DATA,\n  CHANGE_CHECK_STATUS,\n  CHANGE_TYPE_STATUS,\n  UPDATE_ATTRIBUTE,\n  UPDATE_FILTERED_DATA,\n  TOGGLE_SETTINGS_VISIBLE,\n  SET_ATTRIBUTES,\n  SET_ATTRIBUTE_COLOR,\n  TOGGLE_COLOR_VISIBLE,\n  SET_ALIAS,\n} from './../actions/index';\n\nconst initialState = {\n  data: [],\n  attributes: [],\n  exportData: [],\n  source: [],\n  updated: false,\n  datasets: [\n    {\n      id: 1,\n      title: 'Followers of presidential candidates Colombia 2018',\n      description: 'Dataset with information about followers on twitter of the presidential cadidates.',\n      name: 'all_followers_id.csv',\n      size: 1048575,\n      n_attributes: 10,\n    },\n    {\n      id: 2,\n      title: 'MoMA Collection',\n      description: 'Evolving collection contains almost 130,000 works of modern and contemporary art.',\n      name: 'Artworks_less_columns.csv',\n      size: 131585,\n      n_attributes: 14,\n    },\n    {\n      id: 3,\n      title: 'VAST Challenge 2017',\n      description: 'The VAST Challenge 2017 offered three mini-challenges and a grand challenge dealing with environmental problems potentially caused by human patterns of life and potentially harmful chemically laden effluent plumes being emitted from factory smokestacks. The data provided included traffic patterns, sensor data though the Boonsong Lekagul Nature Preserve.',\n      name: 'Lekagul Sensor Data.csv',\n      size: 171477,\n      n_attributes: 4,\n    },\n  ],\n};\nconst shipyard = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_DATA:\n      return Object.assign({}, state, {\n        source: action.source,\n        data: action.data,\n        attributes: action.attributes,\n        exportData: action.source,\n      });\n    case RESET_DATA:\n      return initialState;\n    case CHANGE_CHECK_STATUS:\n    let attrs = state.attributes.slice(0);\n    const pos = attrs.map(e => e.name).indexOf(action.attribute.name);\n    attrs[pos].checked = action.status;\n    return Object.assign({}, state, {\n      attributes: attrs,\n    });\n    case CHANGE_TYPE_STATUS:\n      let attrs2 = state.attributes;\n      const pos2 = attrs2.map(e => e.name).indexOf(action.attribute.name);\n      attrs2[pos2].type = action.status;\n      let original = [...state.source];\n      let sourceData = state.source.slice();\n      switch(action.status) {\n        case 'date':\n          sourceData.forEach(datum=> {\n            datum[action.attribute.name] = new Date(datum[action.attribute.name]);\n          });\n          break;\n        case 'sequential':\n          sourceData.forEach(datum=> {\n            datum[action.attribute.name] = +datum[action.attribute.name];\n          });\n          break;\n        default:\n          sourceData.forEach(datum=> {\n            datum[action.attribute.name] = datum[action.attribute.name];\n          });\n          break;\n      }\n      let actualData = state.data.slice();\n      actualData.forEach((d,i)=> {\n        d[action.attribute.name] = sourceData[i][action.attribute.name];\n      })\n      return Object.assign({}, state, {\n        attributes: attrs2,\n        data: actualData,\n      })\n    case UPDATE_ATTRIBUTE:\n      return Object.assign({}, state, {\n        updated: !state.updated,\n      });\n    case UPDATE_FILTERED_DATA:\n      return Object.assign({}, state, {\n        exportData: action.exportData,\n      });\n    case TOGGLE_SETTINGS_VISIBLE:\n      let items = state.attributes.slice(0);\n      items[action.index][\"settings\"] = action.visible;\n      return Object.assign({}, state, {\n        attributes: items,\n      });\n    case SET_ATTRIBUTES:\n      return Object.assign({}, state, {\n        attributes: action.attributes,\n      });\n    case SET_ATTRIBUTE_COLOR:\n      let attributesColor = [...state.attributes];\n      let att = attributesColor.forEach(d=> {\n        if(d.name == action.attributeName) {\n          d[\"color\"] = action.color;\n        }\n      });\n      return Object.assign({}, state, {\n        attributes: attributesColor,\n      });\n    case SET_ALIAS:\n      return state;\n    case TOGGLE_COLOR_VISIBLE:\n      return state;\n    default:\n      return state;\n  }\n};\n\nexport default shipyard;\n","import { SHOW_MODAL, TOGGLE_LOADING, TOGGLE_DATA_LOADED, RESET_DATA, TOGGLE_SIDEBAR, DELETE_COMPONENT_CLASS, ADD_COMPONENT_CLASS, SET_COMPONENT_CLASSES, SWAP_COMPONENT_CLASSES } from './../actions/index';\n\nconst initialState = {\n  confirmLoading: false,\n  closed: true,\n  loading: false,\n  visible: false,\n  dataLoaded: false,\n  showSidebar: false,\n  componentClasses: ['box'],\n};\nconst ui = (state = initialState, action) => {\n  switch (action.type) {\n    case SHOW_MODAL:\n      return Object.assign({}, state, {\n        visible: !state.visible,\n      });\n    case TOGGLE_LOADING:\n      return Object.assign({}, state, {\n        loading: !state.loading,\n      });\n    case TOGGLE_DATA_LOADED:\n      return Object.assign({}, state, {\n        dataLoaded: !state.dataLoaded,\n      });\n    case RESET_DATA:\n      return initialState;\n    case TOGGLE_SIDEBAR:\n      return Object.assign({}, state, {\n        showSidebar: !state.showSidebar,\n      });\n    case DELETE_COMPONENT_CLASS:\n      let componentsDeleted = state.componentClasses.splice(0);\n      componentsDeleted[action.index].classes = [\"box\"];\n      return Object.assign({}, state, {\n        componentClasses: componentsDeleted,\n      });\n    case ADD_COMPONENT_CLASS:\n      console.log(action)\n      const componentAdd = ['box', action.className];\n      let componentsAdd = state.componentClasses.splice(0);\n      componentsAdd[action.index].classes = componentAdd; \n      return Object.assign({}, state, {\n        componentClasses: componentsAdd,\n      });\n    case SWAP_COMPONENT_CLASSES:\n      let temp;\n      let swaped = state.componentClasses.splice(0);\n      temp = swaped[action.i];\n      swaped[action.i] = swaped[action.j];\n      swaped[action.j] = temp;\n      return Object.assign({}, state, {\n        componentClasses: swaped,\n      });\n    case SET_COMPONENT_CLASSES:\n      let array = [];\n      console.log(action)\n      console.log(state.componentClasses)\n      action.attributes.forEach((d, k)=>{\n        let i = {};\n        i.classes = ['box', 'hide'];\n        i.index = k;\n        array.push(i);\n      })\n      return Object.assign({}, state, {\n        componentClasses: array,\n      })\n    default:\n      return state;\n  }\n};\n\nexport default ui;\n","import { combineReducers } from 'redux';\nimport shipyard from './shipyard';\nimport ui from './ui';\n\nexport default combineReducers({\n  shipyard,\n  ui,\n});\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport thunkMiddleware from 'redux-thunk';\nimport { render } from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport { createLogger } from 'redux-logger';\nimport App from './components/App';\nimport rootReducer from './reducers';\nimport registerServiceWorker from './registerServiceWorker';\nimport './App.css';\n\nconst loggerMiddleware = createLogger();\nconst store = createStore(\n  rootReducer,\n  applyMiddleware(\n    thunkMiddleware,\n    loggerMiddleware,\n  ),\n);\nrender(<Provider store={store}><App /></Provider>, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}